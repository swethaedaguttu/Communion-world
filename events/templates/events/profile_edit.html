<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile</title>
    <style>
        /* (Your existing CSS styles remain unchanged) */
    </style>
</head>
<body>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <a class="navbar-brand" href="#">InterfaithConnect</a>
        <a class="nav-link" href="index.html">Home</a>
        <a class="nav-link" href="#">Profile</a>
        <a class="nav-link" href="#">Volunteer History</a>
        <a class="nav-link" href="#">Settings</a>
        <a class="nav-link" href="#">Logout</a>
    </nav>

    <!-- Header -->
    <header>
        <h1>Edit Your Profile</h1>
    </header>

    <!-- Profile Edit Sections -->
    <div class="container">
        <!-- Profile Picture Section -->
        <section class="profile-picture">
            <h2>Profile Picture</h2>
            <img src="{{ user_profile.profile_picture.url }}" alt="Profile Picture">
            <form method="post" enctype="multipart/form-data" id="profilePictureForm">
                {% csrf_token %}
                <input type="file" id="profile_picture" name="profile_picture" accept="image/*" required>
                <button type="submit">Update Picture</button>
            </form>
        </section>

        <!-- Personal Information Section -->
        <section>
            <h2>Personal Information</h2>
            <form method="post" id="personalInfoForm">
                {% csrf_token %}
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" value="{{ user.username }}" required>

                <label for="location">Location:</label>
                <input type="text" id="location" name="location" value="{{ user_profile.location }}">

                <label for="country">Country:</label>
                <input type="text" id="country" name="country" value="{{ user_profile.country }}">

                <label for="state">State:</label>
                <input type="text" id="state" name="state" value="{{ user_profile.state }}">

                <label for="faith_background">Faith Background:</label>
                <input type="text" id="faith_background" name="faith_background" value="{{ user_profile.faith_background }}">

                <label for="language">Language:</label>
                <input type="text" id="language" name="language" value="{{ user_profile.language }}">

                <label for="dob">Date of Birth:</label>
                <input type="date" id="dob" name="dob" value="{{ user_profile.dob }}">

                <label for="gender">Gender:</label>
                <select id="gender" name="gender">
                    <option value="" {% if user_profile.gender == "" %}selected{% endif %}>Select Gender</option>
                    <option value="male" {% if user_profile.gender == "male" %}selected{% endif %}>Male</option>
                    <option value="female" {% if user_profile.gender == "female" %}selected{% endif %}>Female</option>
                    <option value="other" {% if user_profile.gender == "other" %}selected{% endif %}>Other</option>
                </select>

                <label for="interests">Interests:</label>
                <textarea id="interests" name="interests" rows="4">{{ user_profile.interests }}</textarea>

                <label for="social_links">Social Media Links:</label>
                <input type="url" id="social_links" name="social_links" value="{{ user_profile.social_links }}" placeholder="https://example.com">

                <button type="submit">Save Changes</button>
            </form>
        </section>

        <!-- Volunteer History Section -->
        <section class="volunteer-history">
            <h2>Your Volunteer History</h2>
            <ul>
                {% for volunteer in volunteer_history %}
                    <li>{{ volunteer.event_name }} - {{ volunteer.date }}</li>
                {% empty %}
                    <li>No volunteer history found.</li>
                {% endfor %}
            </ul>

            <!-- Pagination -->
            <div class="pagination">
                {% if volunteer_history.has_previous %}
                    <a href="?page={{ volunteer_history.previous_page_number }}">Previous</a>
                {% endif %}

                {% if volunteer_history.has_next %}
                    <a href="?page={{ volunteer_history.next_page_number }}">Next</a>
                {% endif %}
            </div>
        </section>

        <!-- Settings Link -->
        <div class="settings-link">
            <a href="{% url 'settings' %}">Go to Settings</a>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 InterfaithConnect. All Rights Reserved.</p>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script>
        // Toast Notification Function
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.innerText = message;
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }
    
// Update profile picture
function updateProfilePicture() {
    const formData = new FormData();
    const fileInput = document.querySelector('input[name="profile_picture"]');
    formData.append('profile_picture', fileInput.files[0]);

    fetch('/profile/update/picture/', {
        method: 'POST',
        body: formData,
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            alert('Profile picture updated successfully!');
        } else {
            alert(`Error: ${data.message}`);
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
}

// Update personal info
function updatePersonalInfo() {
    const formData = new URLSearchParams(new FormData(document.querySelector('#personal-info-form')));
    
    fetch('/profile/update/info/', {
        method: 'POST',
        body: formData,
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            alert('Personal information updated successfully!');
        } else {
            alert(`Error: ${data.message}`);
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
}

    </script>
    </body>
</html>
